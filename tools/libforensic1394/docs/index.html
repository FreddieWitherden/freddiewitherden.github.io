<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libforensic1394: libforensic1394</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>libforensic1394 </h1>  </div>
</div>
<div class="contents">
<h3 class="version">0.2.0 </h3><p>The latest version of libforensic1394 can be found at: <a href="https://freddie.witherden.org/tools/libforensic1394/">https://freddie.witherden.org/tools/libforensic1394/</a></p>
<p>This API gives you access to the FireWire bus of contemporary operating systems in order to facilitate digital forensics on an attached device. Unlike existing APIs Forensic1394 is:</p>
<ul>
<li>Modern; unlike existing FireWire libraries Forensic1394 supports the new `Juju' stack introduced in Linux 2.6.22.</li>
<li>Portable; with platform drivers existing for both Linux (Juju stack only) and Mac OS X (via I/O Kit).</li>
<li>Minimal; only functions required for performing digital forensics are provided.</li>
</ul>
<p>By omitting features not required in forensic applications (such as isochronous transfers) the API is both simple to use and port. For example the memory of an attached device can be read using the following code:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="forensic1394_8h.html#ab97a3e13434eea089d8ea25dcb4c725d" title="An opaque bus handle.">forensic1394_bus</a> *bus;
 <a class="code" href="forensic1394_8h.html#af62f7b99ad563b7279e3bd14160459a9" title="An opaque device handle.">forensic1394_dev</a> **dev;
 <span class="keywordtype">char</span> data[512];

 <span class="comment">// Allocate a bus handle</span>
 bus = <a class="code" href="forensic1394_8h.html#a706c8e0d8062808d0c43d1322589c64d" title="Allocates a new forensic1394 handle.">forensic1394_alloc</a>();
 assert(bus);

 <span class="comment">// Enabls SBP-2; required for memory access to some systems</span>
 <a class="code" href="forensic1394_8h.html#aeec576ca43b3028d625eb4dfa72a3510" title="Provides an SBP-2 unit directory; required for DMA to Windows systems.">forensic1394_enable_sbp2</a>(bus);

 <span class="comment">// Give the bus time to reinitialise</span>
 sleep(2);

 <span class="comment">// Get the devices attached to the systen</span>
 dev = <a class="code" href="forensic1394_8h.html#aa7850f7acd53244e5480b78e9a008a7d" title="Gets the devices attached to the FireWire bus.">forensic1394_get_devices</a>(bus, NULL, NULL);
 assert(dev);

 <span class="comment">// Open the first device</span>
 <a class="code" href="forensic1394_8h.html#a420a54c5763a21ba7762fae679c05a47" title="Opens the device dev for reading/writing.">forensic1394_open_device</a>(dev[0]);

 <span class="comment">// Read some memory from the device</span>
 <a class="code" href="forensic1394_8h.html#a83ab31d1fa639e58de221f20e58398ba" title="Reads len bytes from dev starting at addr into buf.">forensic1394_read_device</a>(dev[0], 50 * 1024 * 1024, 512, data);

 <span class="comment">// Data now contains 512 bytes of memory starting at an offset of 50MiB</span>

 <span class="comment">// Close the device and destroy the bus</span>
 <a class="code" href="forensic1394_8h.html#a65ea7c6d2c002d3c76260ecc31246e50" title="Closes the device dev.">forensic1394_close_device</a>(dev[0]);
 <a class="code" href="forensic1394_8h.html#ac3cc0828425003de551ab06762b2f82c" title="Destroys a bus handle.">forensic1394_destroy</a>(bus);
</pre></div><dl class="user"><dt><b>Handling bus resets</b></dt><dd>Bus resets occur when devices are added/removed from the system or when the configuration ROM of a device is updated. The following methods are affected by bus resets:<ul>
<li><a class="el" href="forensic1394_8h.html#a420a54c5763a21ba7762fae679c05a47" title="Opens the device dev for reading/writing.">forensic1394_open_device</a></li>
<li><a class="el" href="forensic1394_8h.html#a83ab31d1fa639e58de221f20e58398ba" title="Reads len bytes from dev starting at addr into buf.">forensic1394_read_device</a></li>
<li><a class="el" href="forensic1394_8h.html#aa5640c0f51c7e5718a715f57d6792bc4" title="Reads each request specified in req from dev asynchronously.">forensic1394_read_device_v</a></li>
<li><a class="el" href="forensic1394_8h.html#a07a2d6fec14b5583a9ebb8c31794bbc9" title="Writes len bytes from buf to dev starting at addr.">forensic1394_write_device</a></li>
<li><a class="el" href="forensic1394_8h.html#aa9f11c78e2815a0c8c457e4d976ab888" title="Writes each request specified in req to dev asynchronously.">forensic1394_write_device_v</a></li>
</ul>
</dd></dl>
<dl class="user"><dt><b></b></dt><dd>After a bus reset calls to all three of these methods will result in <a class="el" href="forensic1394_8h.html#a6e61a3654f6439aee9e1ebe7c158a7fea0a54ffee022599876d4153f54415e427" title="A bus reset has occured.">FORENSIC1394_RESULT_BUS_RESET</a> being returned. Applications should handle this by saving the GUIDs of any devices being accessed and then call <a class="el" href="forensic1394_8h.html#aa7850f7acd53244e5480b78e9a008a7d" title="Gets the devices attached to the FireWire bus.">forensic1394_get_devices</a>. Calling this will void all device handles. The new list of devices can then be iterated through and their GUIDs compared against saved GUIDs. The GUID of a device can be obtained by calling <a class="el" href="forensic1394_8h.html#a035d55f88950fd429bf72551be2f7c6c" title="Returns the GUID of the device.">forensic1394_get_device_guid</a>.</dd></dl>
<dl class="user"><dt><b>Thread safety</b></dt><dd>libforensic1394 is thread safe at the device level with the restriction that devices can only be accessed by the thread that opened them. This is because some backends, namely Mac OS X/IOKit, install thread-specific callback dispatchers upon opening a device. When using multiple threads of execution care must be taken when calling <a class="el" href="forensic1394_8h.html#aa7850f7acd53244e5480b78e9a008a7d" title="Gets the devices attached to the FireWire bus.">forensic1394_get_devices</a> (which closes and destroys any open device handles). It is the responsibility of the caller to ensure that this is safe. The process can be simplified through the use of an <em>ondestroy</em> callback handler.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Freddie Witherden </dd></dl>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Sep 10 2010 16:35:06 for libforensic1394 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
